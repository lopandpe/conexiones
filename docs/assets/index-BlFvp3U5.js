(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const l of t)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(t){const l={};return t.integrity&&(l.integrity=t.integrity),t.referrerPolicy&&(l.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?l.credentials="include":t.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(t){if(t.ep)return;t.ep=!0;const l=o(t);fetch(t.href,l)}})();const q="04/07/2025",[f,v,E]=q.split("/").map(Number),b=new Date(E,v-1,f),a={1:{groupId:1,ids:["1","2","3","4"],texts:["Ajedrez","Casablanca","Michael Jackson","Oreo"],color:"#6c6c6c",title:"Blanco y negro",emoji:"üü´"},2:{groupId:2,ids:["5","6","7","8"],texts:["Coraz√≥n","URSS","Tomate","Elmo"],color:"#ff5733",title:"Cosas rojas",emoji:"üü•"},3:{groupId:3,ids:["9","10","11","12"],texts:["Sumar","Barbie","Hello Kitty","Cosmopolitan"],color:"#f744ff",title:"Logos rosas'",emoji:"üü™"},4:{groupId:4,ids:["13","14","15","16"],texts:["Lim√≥n","Bob Esponja","Patito de ducha","Bumble"],color:"#ecde14",title:"Cosas amarillas",emoji:"üü®"}},C=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],I=`Jueguito del ${String(f).padStart(2,"0")} de ${C[b.getMonth()]} de ${b.getFullYear()}`;document.getElementById("gametitle").textContent=I;const L=JSON.parse(localStorage.getItem("conexiones")||"{}"),k=`${E}${String(v).padStart(2,"0")}${String(f).padStart(2,"0")}`,j="conexiones",x="conexiones-stats";if(L.lastDate===k){var n=L.data;console.log("Ya jugaron hoy, recuperando progreso")}else{var n={errorCount:0,statistic:[],todayResults:[],statsUpdated:!1,checks:0,final:!1,placedGroups:[]};console.log("Nuevo d√≠a, juego reiniciado")}const $={totalDays:0,buckets:{0:0,1:0,2:0,3:0,fail:0},streak:0};let c=Object.assign({},$,JSON.parse(localStorage.getItem(x)||"{}"));function p(){localStorage.setItem(j,JSON.stringify({lastDate:k,data:n}))}function A(){localStorage.setItem(x,JSON.stringify(c))}let u=0;c.totalDays==0&&document.querySelector("#instructions").classList.toggle("active");document.querySelector("#open-modal").addEventListener("click",()=>{y("#modal")});document.querySelectorAll(".close-modal").forEach(e=>{e.addEventListener("click",()=>{const o=e.parentElement.parentElement.getAttribute("id");y(`#${o}`)})});O();setTimeout(()=>{w()},100);function O(){let e=[];for(const[r,t]of Object.entries(a))for(let l=0;l<4;l++)e.push({id:t.ids[l],text:t.texts[l],order:l});G(e);let s=1,o=1;e.forEach(r=>{o==5&&(s++,o=1);let t=document.createElement("div");t.classList.add("cell"),t.classList.add("row-"+s),t.classList.add("col-"+o),t.innerText=r.text,t.setAttribute("data-id",r.id),t.setAttribute("data-order",r.order),document.getElementById("grid").appendChild(t),o++})}function w(){n.final?(n.checks=0,setTimeout(()=>T(),100)):(n.placedGroups.forEach((e,s)=>{const o=a[e];o&&h(o,s,0)}),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-n.errorCount)+"</b> intentos.")}let M=document.querySelectorAll(".cell");M.forEach(e=>{e.addEventListener("click",function(){n.final||(this.classList.contains("active")?(this.classList.remove("active"),u--):u<4?(this.classList.add("active"),u++):m("Solo puedes seleccionar cuatro casillas"))})});let N=document.querySelector("#submit");N.addEventListener("click",function(){let e=[];if(u==4){let s=document.querySelectorAll(".cell.active"),o=null,r=0,t=!0;if(s.forEach(l=>{let i=l.getAttribute("data-id");o=J(i,a),e.push({id:i,text:l.innerText,emoji:o.emoji}),r==0?r=o.groupId:o&&o.groupId!=r&&(t=!1)}),n.todayResults.push(e),t)h(o,n.checks,n.checks*500),n.placedGroups.push(r),n.checks++,n.checks=n.checks,u=0;else{s.forEach(i=>{i.classList.add("error")}),setTimeout(()=>{s.forEach(i=>{i.classList.remove("error")})},1e3),n.errorCount++;let l=document.querySelectorAll("#tries li:not(.explode)");l[l.length-1].classList.add("explode"),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-n.errorCount)+"</b> intentos."}(n.errorCount>3||n.checks==4)&&(setTimeout(()=>{T(n.checks)},1e3),n.final=!0,n.final=!0,p())}else m("Debes seleccionar cuatro casillas","warning");p()});function m(e,s="warning",o=!1){let r=document.querySelector("#messages"),t=r.innerText;r.innerText=e,r.classList=[s],o||setTimeout(()=>{r.innerText=t,r.classList=[]},2e3)}function T(){m("Fin de la partida","warning",!0),document.querySelector("#actions").style.display="none",document.querySelector("#submit").style.pointerEvents="none";let e=1;for(const s in a){if(a.hasOwnProperty(s)){const o=a[s];h(o,n.checks++,e*1e3)}e++}n.statsUpdated||(P(),n.statsUpdated=!0,p()),setTimeout(()=>{B()},(e+2)*1e3)}function J(e,s){const o=e.toString();for(const[r,t]of Object.entries(s))if(t.ids.includes(o))return t;return null}function G(e){for(var s=e.length-1;s>0;s--){var o=Math.floor(Math.random()*(s+1)),r=e[s];e[s]=e[o],e[o]=r}}function R(e,s){let o=document.createElement("div");o.classList.add("solution-line");let r=document.createElement("div");r.classList.add("title"),r.innerText=e.title;let t=document.createElement("ul");e.texts.forEach(l=>{let i=document.createElement("li");i.innerText=l,t.appendChild(i)}),o.appendChild(r),o.appendChild(t),o.style.top=s*85+"px",document.getElementById("grid").appendChild(o),o.style.backgroundColor=e.color,setTimeout(()=>{o.style.opacity=1},1)}function h(e,s,o){for(let r=0;r<e.ids.length;r++){let t=document.querySelector("[data-id='"+e.ids[r]+"']");t.classList.remove("active");let l=s+1,i=r+1,d=document.querySelector(".cell.row-"+l+".col-"+i);d.classList=t.classList,t.classList=["cell row-"+l+" col-"+i],t.classList.add("checked"),t.style.backgroundColor=e.color}setTimeout(()=>{R(e,s)},o),delete a[e.groupId]}function B(){let e="";n.todayResults.forEach(d=>{let g=document.createElement("div");d.forEach(S=>{g.innerText+=S.emoji,e+=S.emoji}),e+="%0a",document.querySelector("#results").append(g)});var s=encodeURIComponent(location.href);let o="whatsapp://send?text=¬°Vaya juegazo!%0a"+e+"%0aJuega aqu√≠: "+s,r="https://t.me/share/url?url="+s+"&text=¬°Vaya juegazo!%0a"+e;document.querySelector("#whatsapp").setAttribute("href",o),document.querySelector("#telegram").setAttribute("href",r),document.querySelector("#open-modal").style.display="block";const t=document.querySelector("#fullstats"),l=d=>(d/c.totalDays*100).toFixed(1)+"%",i=`
        <h2>Estad√≠sticas hist√≥ricas</h2>
        <ul id="stats">
            <li><span>Sin fallos:</span> <span>${c.buckets[0]} (${l(c.buckets[0])})</span></li>
            <li><span>1 fallo:</span> <span>${c.buckets[1]} (${l(c.buckets[1])})</span></li>
            <li><span>2 fallos:</span> <span>${c.buckets[2]} (${l(c.buckets[2])})</span></li>
            <li><span>3 fallos:</span> <span>${c.buckets[3]} (${l(c.buckets[3])})</span></li>
            <li><span>No resuelto:</span> <span>${c.buckets.fail} (${l(c.buckets.fail)})</span></li>
        </ul>
        <p>Racha actual ganando: <b>${c.streak}</b> d√≠as</p>
    `;t.insertAdjacentHTML("beforeend",i),y("#modal")}function y(e){document.querySelector(e).classList.toggle("active")}function P(){c.totalDays++;const e=n.errorCount;e>=0&&e<=3?(c.buckets[e]++,c.streak++):(c.buckets.fail++,c.streak=0),A()}
