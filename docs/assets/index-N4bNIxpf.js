(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();const T="02/07/2025",[f,L,v]=T.split("/").map(Number),S=new Date(v,L-1,f),a={1:{groupId:1,ids:["1","2","3","4"],texts:["Dosel","Militar","Docente","Se√≠smo"],color:"#579c1e",title:"Comienzan con n√∫meros",emoji:"üü©"},2:{groupId:2,ids:["5","6","7","8"],texts:["Bajo","Plomo","Mar","Grado"],color:"#1e559c",title:"Anteponiendo A- cambia el significado",emoji:"üü¶"},3:{groupId:3,ids:["9","10","11","12"],texts:["Tronco","T√≠o","Macho","Socio"],color:"#c230b6",title:"Sin√≥nimos de 'colega'",emoji:"üü™"},4:{groupId:4,ids:["13","14","15","16"],texts:["Marea","Extremo","Barricada","Platero"],color:"#ecde14",title:"Grupos de Rock",emoji:"üü®"}},q=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],I=`Jueguito del ${String(f).padStart(2,"0")} de ${q[S.getMonth()]} de ${S.getFullYear()}`;document.getElementById("gametitle").textContent=I;const b=JSON.parse(localStorage.getItem("conexiones")||"{}"),k=`${v}${String(L).padStart(2,"0")}${String(f).padStart(2,"0")}`,C="conexiones",E="conexiones-stats";if(b.lastDate===k){var n=b.data;console.log("Ya jugaron hoy, recuperando progreso")}else{var n={errorCount:0,statistic:[],todayResults:[],statsUpdated:!1,checks:0,final:!1,placedGroups:[]};console.log("Nuevo d√≠a, juego reiniciado")}const $={totalDays:0,buckets:{0:0,1:0,2:0,3:0,fail:0},streak:0};let i=Object.assign({},$,JSON.parse(localStorage.getItem(E)||"{}"));function p(){localStorage.setItem(C,JSON.stringify({lastDate:k,data:n}))}function j(){localStorage.setItem(E,JSON.stringify(i))}let d=0;i.totalDays==0&&document.querySelector("#instructions").classList.toggle("active");document.querySelector("#open-modal").addEventListener("click",()=>{y("#modal")});document.querySelectorAll(".close-modal").forEach(t=>{t.addEventListener("click",()=>{const o=t.parentElement.parentElement.getAttribute("id");y(`#${o}`)})});A();setTimeout(()=>{M()},100);function A(){let t=[];for(const[l,e]of Object.entries(a))for(let r=0;r<4;r++)t.push({id:e.ids[r],text:e.texts[r],order:r});G(t);let s=1,o=1;t.forEach(l=>{o==5&&(s++,o=1);let e=document.createElement("div");e.classList.add("cell"),e.classList.add("row-"+s),e.classList.add("col-"+o),e.innerText=l.text,e.setAttribute("data-id",l.id),e.setAttribute("data-order",l.order),document.getElementById("grid").appendChild(e),o++})}function M(){n.final?(n.checks=0,setTimeout(()=>x(),100)):(n.placedGroups.forEach((t,s)=>{const o=a[t];o&&h(o,s,0)}),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-n.errorCount)+"</b> intentos.")}let O=document.querySelectorAll(".cell");O.forEach(t=>{t.addEventListener("click",function(){n.final||(this.classList.contains("active")?(this.classList.remove("active"),d--):d<4?(this.classList.add("active"),d++):m("Solo puedes seleccionar cuatro casillas"))})});let w=document.querySelector("#submit");w.addEventListener("click",function(){let t=[];if(d==4){let s=document.querySelectorAll(".cell.active"),o=null,l=0,e=!0;if(s.forEach(r=>{let c=r.getAttribute("data-id");o=N(c,a),t.push({id:c,text:r.innerText,emoji:o.emoji}),l==0?l=o.groupId:o&&o.groupId!=l&&(e=!1)}),n.todayResults.push(t),e)h(o,n.checks,n.checks*500),n.placedGroups.push(l),n.checks++,n.checks=n.checks,d=0;else{s.forEach(c=>{c.classList.add("error")}),setTimeout(()=>{s.forEach(c=>{c.classList.remove("error")})},1e3),n.errorCount++;let r=document.querySelectorAll("#tries li:not(.explode)");r[r.length-1].classList.add("explode"),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-n.errorCount)+"</b> intentos."}(n.errorCount>3||n.checks==4)&&(setTimeout(()=>{x(n.checks)},1e3),n.final=!0,n.final=!0,p())}else m("Debes seleccionar cuatro casillas","warning");p()});function m(t,s="warning",o=!1){let l=document.querySelector("#messages"),e=l.innerText;l.innerText=t,l.classList=[s],o||setTimeout(()=>{l.innerText=e,l.classList=[]},2e3)}function x(){m("Fin de la partida","warning",!0),document.querySelector("#actions").style.display="none",document.querySelector("#submit").style.pointerEvents="none";let t=1;for(const s in a){if(a.hasOwnProperty(s)){const o=a[s];h(o,n.checks++,t*1e3)}t++}n.statsUpdated||(R(),n.statsUpdated=!0,p()),setTimeout(()=>{P()},(t+2)*1e3)}function N(t,s){const o=t.toString();for(const[l,e]of Object.entries(s))if(e.ids.includes(o))return e;return null}function G(t){for(var s=t.length-1;s>0;s--){var o=Math.floor(Math.random()*(s+1)),l=t[s];t[s]=t[o],t[o]=l}}function J(t,s){let o=document.createElement("div");o.classList.add("solution-line");let l=document.createElement("div");l.classList.add("title"),l.innerText=t.title;let e=document.createElement("ul");t.texts.forEach(r=>{let c=document.createElement("li");c.innerText=r,e.appendChild(c)}),o.appendChild(l),o.appendChild(e),o.style.top=s*85+"px",document.getElementById("grid").appendChild(o),o.style.backgroundColor=t.color,setTimeout(()=>{o.style.opacity=1},1)}function h(t,s,o){for(let l=0;l<t.ids.length;l++){let e=document.querySelector("[data-id='"+t.ids[l]+"']");e.classList.remove("active");let r=s+1,c=l+1,u=document.querySelector(".cell.row-"+r+".col-"+c);u.classList=e.classList,e.classList=["cell row-"+r+" col-"+c],e.classList.add("checked"),e.style.backgroundColor=t.color}setTimeout(()=>{J(t,s)},o),delete a[t.groupId]}function P(){let t="";n.todayResults.forEach(c=>{let u=document.createElement("div");c.forEach(g=>{u.innerText+=g.emoji,t+=g.emoji}),t+="%0a",document.querySelector("#results").append(u)});var s=encodeURIComponent(location.href);let o="whatsapp://send?text=¬°Vaya juegazo!%0a"+t+"%0aJuega aqu√≠: "+s;document.querySelector("#whatsapp").setAttribute("href",o),document.querySelector("#open-modal").style.display="block";const l=document.querySelector("#fullstats"),e=c=>(c/i.totalDays*100).toFixed(1)+"%",r=`
        <h2>Estad√≠sticas hist√≥ricas</h2>
        <ul id="stats">
            <li><span>Sin fallos:</span> <span>${i.buckets[0]} (${e(i.buckets[0])})</span></li>
            <li><span>1 fallo:</span> <span>${i.buckets[1]} (${e(i.buckets[1])})</span></li>
            <li><span>2 fallos:</span> <span>${i.buckets[2]} (${e(i.buckets[2])})</span></li>
            <li><span>3 fallos:</span> <span>${i.buckets[3]} (${e(i.buckets[3])})</span></li>
            <li><span>No resuelto:</span> <span>${i.buckets.fail} (${e(i.buckets.fail)})</span></li>
        </ul>
        <p>Racha actual ganando: <b>${i.streak}</b> d√≠as</p>
    `;l.insertAdjacentHTML("beforeend",r),y("#modal")}function y(t){document.querySelector(t).classList.toggle("active")}function R(){i.totalDays++;const t=n.errorCount;t>=0&&t<=3?(i.buckets[t]++,i.streak++):(i.buckets.fail++,i.streak=0),j()}
