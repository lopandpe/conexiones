(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const i of t)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(t){const i={};return t.integrity&&(i.integrity=t.integrity),t.referrerPolicy&&(i.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?i.credentials="include":t.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(t){if(t.ep)return;t.ep=!0;const i=e(t);fetch(t.href,i)}})();const u={1:{ids:["1","2","3","4"],texts:["Comisiones","Solidaridad","Uni칩n","Confederaci칩n"],color:"#579c1e",title:"Inicial de sindicato",emoji:"游릴"},2:{ids:["5","6","7","8"],texts:["Esponja","Coral","Crucero","Ola"],color:"#1e559c",title:"En el mar",emoji:"游릱"},3:{ids:["9","10","11","12"],texts:["Apat칤a","Cabeza","Entuerto","Parasol"],color:"#c230b6",title:"Comienzan con una preposici칩n",emoji:"游릵"},4:{ids:["13","14","15","16"],texts:["Crew","Asamblea","Colectivo","Pe침a"],color:"#ecde14",title:"Grupo de personas",emoji:"游릳"}};let h=[],p=[];for(const[l,o]of Object.entries(u))for(let e=0;e<4;e++)p.push({id:o.ids[e],text:o.texts[e],order:e});S(p);let y=1,a=1;p.forEach(l=>{a==5&&(y++,a=1);let o=document.createElement("div");o.classList.add("cell"),o.classList.add("row-"+y),o.classList.add("col-"+a),o.innerText=l.text,o.setAttribute("data-id",l.id),o.setAttribute("data-order",l.order),document.getElementById("grid").appendChild(o),a++});let x=document.querySelectorAll(".cell"),n=0,f=0,d=0,L=!1;x.forEach(l=>{l.addEventListener("click",function(){L||(this.classList.contains("active")?(this.classList.remove("active"),n--):n<4?(this.classList.add("active"),n++):m("Solo puedes seleccionar cuatro casillas"))})});let v=document.querySelector("#submit");v.addEventListener("click",function(){let l=[];if(n==4){let o=document.querySelectorAll(".cell.active"),e=null,r=0,t=!0;if(o.forEach(i=>{let s=i.getAttribute("data-id");e=g(s,u),l.push({id:s,text:i.innerText,emoji:e.emoji}),r==0?r=e.groupId:e&&e.groupId!=r&&(t=!1)}),h.push(l),t)b(e),d++,n=0;else{o.forEach(s=>{s.classList.add("error")}),setTimeout(()=>{o.forEach(s=>{s.classList.remove("error")})},1e3),f++;let i=document.querySelectorAll("#tries li:not(.explode)");i[i.length-1].classList.add("explode"),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-f)+"</b> intentos."}(f>3||d==4)&&(m("Fin de la partida","warning",!0),C(d,h),L=!0)}else m("Debes seleccionar cuatro casillas","warning")});function m(l,o="warning",e=!1){let r=document.querySelector("#messages"),t=r.innerText;r.innerText=l,r.classList=[o],e||setTimeout(()=>{r.innerText=t,r.classList=[]},2e3)}function C(l,o){if(document.querySelector("#actions").style.opacity=0,document.querySelector("#submit").style.pointerEvents="none",l<4)for(let e=l;e<4;e++)setTimeout(()=>{let t=document.querySelector(".cell:not(.checked)").getAttribute("data-id"),i=g(t,u);i.ids.forEach(s=>{let c=document.querySelector('[data-id = "'+s+'"]');c.classList.add("checked"),c.style.backgroundColor=i.color,E(s,e)}),b()},(e-l)*1e3);console.log(o)}function g(l,o){const e=l.toString();for(const[r,t]of Object.entries(o))if(t.ids.includes(e))return{groupId:r,ids:t.ids,color:t.color,title:t.title,texts:t.texts,emoji:t.emoji};return null}function S(l){for(var o=l.length-1;o>0;o--){var e=Math.floor(Math.random()*(o+1)),r=l[o];l[o]=l[e],l[e]=r}}function E(l,o){const e=g(l,u);let r=document.createElement("div");r.classList.add("solution-line");let t=document.createElement("div");t.classList.add("title"),t.innerText=e.title;let i=document.createElement("ul");console.log(e),e.texts.forEach(s=>{let c=document.createElement("li");c.innerText=s,i.appendChild(c)}),r.appendChild(t),r.appendChild(i),r.style.top=o*85+"px",document.getElementById("grid").appendChild(r),r.style.backgroundColor=e.color,setTimeout(()=>{r.style.opacity=1},1)}function b(l){l.ids.forEach(o=>{let e=document.querySelector("[data-id='"+o+"']");e.classList.remove("active");let r=d+1,t=parseInt(e.getAttribute("data-order"))+1,i=document.querySelector(".cell.row-"+r+".col-"+t);i.classList=e.classList,e.classList=["cell row-"+r+" col-"+t],e.classList.add("checked"),e.style.backgroundColor=l.color}),l.id,E(l.ids[0],d)}
