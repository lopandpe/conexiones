(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();const q="03/07/2025",[f,v,x]=q.split("/").map(Number),b=new Date(x,v-1,f),a={1:{groupId:1,ids:["1","2","3","4"],texts:["Manco","Alcal√°","Molinos","Siglo de oro"],color:"#579c1e",title:"Miguel de Cervantes",emoji:"üü©"},2:{groupId:2,ids:["5","6","7","8"],texts:["Diario","Anillo","Diadema","Serpiente"],color:"#1e559c",title:"Horrocruxes",emoji:"üü¶"},3:{groupId:3,ids:["9","10","11","12"],texts:["Real","Deportivo","Atl√©tico","Rayo"],color:"#c230b6",title:"Iniciales Equipos de F√∫tbol'",emoji:"üü™"},4:{groupId:4,ids:["13","14","15","16"],texts:["Amor","Roma","Ramo","Mora"],color:"#ecde14",title:"Mismas letras",emoji:"üü®"}},I=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],A=`Jueguito del ${String(f).padStart(2,"0")} de ${I[b.getMonth()]} de ${b.getFullYear()}`;document.getElementById("gametitle").textContent=A;const L=JSON.parse(localStorage.getItem("conexiones")||"{}"),E=`${x}${String(v).padStart(2,"0")}${String(f).padStart(2,"0")}`,C="conexiones",k="conexiones-stats";if(L.lastDate===E){var n=L.data;console.log("Ya jugaron hoy, recuperando progreso")}else{var n={errorCount:0,statistic:[],todayResults:[],statsUpdated:!1,checks:0,final:!1,placedGroups:[]};console.log("Nuevo d√≠a, juego reiniciado")}const $={totalDays:0,buckets:{0:0,1:0,2:0,3:0,fail:0},streak:0};let i=Object.assign({},$,JSON.parse(localStorage.getItem(k)||"{}"));function p(){localStorage.setItem(C,JSON.stringify({lastDate:E,data:n}))}function M(){localStorage.setItem(k,JSON.stringify(i))}let u=0;i.totalDays==0&&document.querySelector("#instructions").classList.toggle("active");document.querySelector("#open-modal").addEventListener("click",()=>{y("#modal")});document.querySelectorAll(".close-modal").forEach(e=>{e.addEventListener("click",()=>{const o=e.parentElement.parentElement.getAttribute("id");y(`#${o}`)})});j();setTimeout(()=>{O()},100);function j(){let e=[];for(const[r,t]of Object.entries(a))for(let s=0;s<4;s++)e.push({id:t.ids[s],text:t.texts[s],order:s});G(e);let l=1,o=1;e.forEach(r=>{o==5&&(l++,o=1);let t=document.createElement("div");t.classList.add("cell"),t.classList.add("row-"+l),t.classList.add("col-"+o),t.innerText=r.text,t.setAttribute("data-id",r.id),t.setAttribute("data-order",r.order),document.getElementById("grid").appendChild(t),o++})}function O(){n.final?(n.checks=0,setTimeout(()=>T(),100)):(n.placedGroups.forEach((e,l)=>{const o=a[e];o&&h(o,l,0)}),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-n.errorCount)+"</b> intentos.")}let w=document.querySelectorAll(".cell");w.forEach(e=>{e.addEventListener("click",function(){n.final||(this.classList.contains("active")?(this.classList.remove("active"),u--):u<4?(this.classList.add("active"),u++):m("Solo puedes seleccionar cuatro casillas"))})});let R=document.querySelector("#submit");R.addEventListener("click",function(){let e=[];if(u==4){let l=document.querySelectorAll(".cell.active"),o=null,r=0,t=!0;if(l.forEach(s=>{let c=s.getAttribute("data-id");o=N(c,a),e.push({id:c,text:s.innerText,emoji:o.emoji}),r==0?r=o.groupId:o&&o.groupId!=r&&(t=!1)}),n.todayResults.push(e),t)h(o,n.checks,n.checks*500),n.placedGroups.push(r),n.checks++,n.checks=n.checks,u=0;else{l.forEach(c=>{c.classList.add("error")}),setTimeout(()=>{l.forEach(c=>{c.classList.remove("error")})},1e3),n.errorCount++;let s=document.querySelectorAll("#tries li:not(.explode)");s[s.length-1].classList.add("explode"),document.querySelector("#messages").innerHTML="Selecciona cuatro casillas, tienes <b>"+(4-n.errorCount)+"</b> intentos."}(n.errorCount>3||n.checks==4)&&(setTimeout(()=>{T(n.checks)},1e3),n.final=!0,n.final=!0,p())}else m("Debes seleccionar cuatro casillas","warning");p()});function m(e,l="warning",o=!1){let r=document.querySelector("#messages"),t=r.innerText;r.innerText=e,r.classList=[l],o||setTimeout(()=>{r.innerText=t,r.classList=[]},2e3)}function T(){m("Fin de la partida","warning",!0),document.querySelector("#actions").style.display="none",document.querySelector("#submit").style.pointerEvents="none";let e=1;for(const l in a){if(a.hasOwnProperty(l)){const o=a[l];h(o,n.checks++,e*1e3)}e++}n.statsUpdated||(P(),n.statsUpdated=!0,p()),setTimeout(()=>{F()},(e+2)*1e3)}function N(e,l){const o=e.toString();for(const[r,t]of Object.entries(l))if(t.ids.includes(o))return t;return null}function G(e){for(var l=e.length-1;l>0;l--){var o=Math.floor(Math.random()*(l+1)),r=e[l];e[l]=e[o],e[o]=r}}function J(e,l){let o=document.createElement("div");o.classList.add("solution-line");let r=document.createElement("div");r.classList.add("title"),r.innerText=e.title;let t=document.createElement("ul");e.texts.forEach(s=>{let c=document.createElement("li");c.innerText=s,t.appendChild(c)}),o.appendChild(r),o.appendChild(t),o.style.top=l*85+"px",document.getElementById("grid").appendChild(o),o.style.backgroundColor=e.color,setTimeout(()=>{o.style.opacity=1},1)}function h(e,l,o){for(let r=0;r<e.ids.length;r++){let t=document.querySelector("[data-id='"+e.ids[r]+"']");t.classList.remove("active");let s=l+1,c=r+1,d=document.querySelector(".cell.row-"+s+".col-"+c);d.classList=t.classList,t.classList=["cell row-"+s+" col-"+c],t.classList.add("checked"),t.style.backgroundColor=e.color}setTimeout(()=>{J(e,l)},o),delete a[e.groupId]}function F(){let e="";n.todayResults.forEach(d=>{let g=document.createElement("div");d.forEach(S=>{g.innerText+=S.emoji,e+=S.emoji}),e+="%0a",document.querySelector("#results").append(g)});var l=encodeURIComponent(location.href);let o="whatsapp://send?text=¬°Vaya juegazo!%0a"+e+"%0aJuega aqu√≠: "+l,r="https://t.me/share/url?url=encodedURL&text=¬°Vaya juegazo!%0a"+e;document.querySelector("#whatsapp").setAttribute("href",o),document.querySelector("#telegram").setAttribute("href",r),document.querySelector("#open-modal").style.display="block";const t=document.querySelector("#fullstats"),s=d=>(d/i.totalDays*100).toFixed(1)+"%",c=`
        <h2>Estad√≠sticas hist√≥ricas</h2>
        <ul id="stats">
            <li><span>Sin fallos:</span> <span>${i.buckets[0]} (${s(i.buckets[0])})</span></li>
            <li><span>1 fallo:</span> <span>${i.buckets[1]} (${s(i.buckets[1])})</span></li>
            <li><span>2 fallos:</span> <span>${i.buckets[2]} (${s(i.buckets[2])})</span></li>
            <li><span>3 fallos:</span> <span>${i.buckets[3]} (${s(i.buckets[3])})</span></li>
            <li><span>No resuelto:</span> <span>${i.buckets.fail} (${s(i.buckets.fail)})</span></li>
        </ul>
        <p>Racha actual ganando: <b>${i.streak}</b> d√≠as</p>
    `;t.insertAdjacentHTML("beforeend",c),y("#modal")}function y(e){document.querySelector(e).classList.toggle("active")}function P(){i.totalDays++;const e=n.errorCount;e>=0&&e<=3?(i.buckets[e]++,i.streak++):(i.buckets.fail++,i.streak=0),M()}
